# High-Level Design (HLD)

## CS-Casino Platform

> **Ğ’ĞµÑ€ÑĞ¸Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°:** 1.0  
> **Ğ”Ğ°Ñ‚Ğ°:** Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025

---

## Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

1. [Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ CSGOEmpire](#1-Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ-csgoempire)
2. [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹](#2-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹)
3. [Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ Frontend Ñ‡ĞµÑ€ĞµĞ· GraphQL](#3-Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ-Ñ-frontend-Ñ‡ĞµÑ€ĞµĞ·-graphql)
4. [E2E-Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ](#4-e2e-Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
5. [Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° AWS](#5-Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ-Ğ½Ğ°-aws)
6. [Ğ‘Ğ¾Ñ€ÑŒĞ±Ğ° Ñ Ñ„Ñ€Ğ¾Ğ´Ğ¾Ğ¼](#6-Ğ±Ğ¾Ñ€ÑŒĞ±Ğ°-Ñ-Ñ„Ñ€Ğ¾Ğ´Ğ¾Ğ¼)
7. [Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸](#7-Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸)
8. [Ğ¢ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ñ Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³](#8-Ñ‚ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ñ-Ğ¸-Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³)
9. [Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ](#9-Ğ·Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ)

---

## 1. Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ CSGOEmpire

### 1.1. ĞĞ±Ğ·Ğ¾Ñ€ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹

**CSGOEmpire** â€” Ğ¾Ğ´Ğ½Ğ° Ğ¸Ğ· ĞºÑ€ÑƒĞ¿Ğ½ĞµĞ¹ÑˆĞ¸Ñ… Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ Ğ´Ğ»Ñ Ğ°Ğ·Ğ°Ñ€Ñ‚Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€ Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ ÑĞºĞ¸Ğ½Ğ¾Ğ² CS2, Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ² 2016 Ğ³Ğ¾Ğ´Ñƒ. ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸:

| ĞÑĞ¿ĞµĞºÑ‚             | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ                                                |
| ------------------ | ------------------------------------------------------- |
| **Ğ˜Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ‹** | Ğ oulette, Coinflip, Match Betting                       |
| **Ğ’Ğ°Ğ»ÑÑ‚Ğ°**         | Coins (Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ñ‹ Ğº ÑĞºĞ¸Ğ½Ğ°Ğ¼ ~$0.60/coin)                  |
| **Ğ’Ğ²Ğ¾Ğ´/Ğ²Ñ‹Ğ²Ğ¾Ğ´**     | Ğ¡ĞºĞ¸Ğ½Ñ‹ CS2/Dota2/Rust, ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ğ»ÑÑ‚Ñ‹ (BTC, ETH, LTC), P2P |
| **Provably Fair**  | ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ server seed, client seed + nonce             |
| **MAU**            | ~500K+ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹                           |
| **Peak CCU**       | ~50K Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹                           |

### 1.2. ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CSGOEmpire Domain                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Gaming     â”‚   Trading    â”‚   Social    â”‚   Competitive      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Roulette   â”‚ â€¢ Deposits   â”‚ â€¢ Chat      â”‚ â€¢ Match Betting    â”‚
â”‚ â€¢ Coinflip   â”‚ â€¢ Withdraws  â”‚ â€¢ Profiles  â”‚ â€¢ Tournament Org   â”‚
â”‚ â€¢ Dice       â”‚ â€¢ P2P Market â”‚ â€¢ Leaderb.  â”‚ â€¢ Live Odds        â”‚
â”‚ â€¢ Crash      â”‚ â€¢ Inventory  â”‚ â€¢ Referrals â”‚ â€¢ E-sports API     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3. Provably Fair â€” ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ğ°Ğ¶Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚

ĞŸĞ¾ÑĞºĞ¾Ğ»ÑŒĞºÑƒ Ñƒ Ğ½Ğ°Ñ **ĞµÑÑ‚ÑŒ Ğ»Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ Ğ¸ Provably Fair**, Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Provably Fair Flow                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  1. Server Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ server_seed (Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ¾)             â”‚
â”‚  2. ĞŸÑƒĞ±Ğ»Ğ¸ĞºÑƒĞµÑ‚ÑÑ SHA-256(server_seed) â€” commitment                 â”‚
â”‚  3. ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ client_seed (Ğ¸Ğ»Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)  â”‚
â”‚  4. Round result = HMAC-SHA512(server_seed, client_seed:nonce)    â”‚
â”‚  5. ĞŸĞ¾ÑĞ»Ğµ Ñ€Ğ°ÑƒĞ½Ğ´Ğ° Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ server_seed Ğ´Ğ»Ñ Ğ²ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğº Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**

- ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑÑ‚Ğ¾Ğ¹ĞºĞ¸Ğ¹ CSPRNG (crypto/rand Ğ² Go)
- ĞĞµĞ¸Ğ·Ğ¼ĞµĞ½ÑĞµĞ¼Ñ‹Ğ¹ audit log Ğ²ÑĞµÑ… seed'Ğ¾Ğ²
- ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ½Ğ° frontend
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ seed Ñ†ĞµĞ¿Ğ¾Ñ‡ĞµĞº Ñ Ğ¿Ñ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ğ¾Ğ¹ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹

---

## 2. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### 2.1. ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

| ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿                  | ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                                                |
| ------------------------ | ---------------------------------------------------------- |
| **Event Sourcing**       | ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ audit trail Ğ´Ğ»Ñ compliance Ğ¸ dispute resolution     |
| **CQRS**                 | Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ read/write Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ´ Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğµ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ |
| **Domain-Driven Design** | Ğ§Ñ‘Ñ‚ĞºĞ¸Ğµ bounded contexts Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğ¹ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸        |
| **Eventual Consistency** | Ğ”Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾ Ğ´Ğ»Ñ non-critical paths (chat, leaderboards)      |
| **Strong Consistency**   | ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¾Ğ² Ğ¸ game outcomes                   |

### 2.2. ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Edge Layer                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CloudFront CDN  â”‚  AWS WAF  â”‚  AWS Shield  â”‚  Route 53                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API Gateway Layer                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    AWS Application Load Balancer                       â”‚
â”‚                              â”‚                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â–¼               â–¼               â–¼                         â”‚
â”‚         GraphQL API    WebSocket GW    Admin API                       â”‚
â”‚         (gqlgen)       (gorilla/ws)    (REST+Auth)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Core Domain Services                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Identity   â”‚   Wallet    â”‚   Gaming    â”‚      Trading                â”‚
â”‚   Service    â”‚   Service   â”‚   Service   â”‚      Service                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Auth/OAuth â”‚ â€¢ Balances  â”‚ â€¢ Roulette  â”‚ â€¢ Steam Trade API           â”‚
â”‚ â€¢ Sessions   â”‚ â€¢ Txns      â”‚ â€¢ Coinflip  â”‚ â€¢ P2P Matching              â”‚
â”‚ â€¢ KYC/AML    â”‚ â€¢ Ledger    â”‚ â€¢ Fair RNG  â”‚ â€¢ Inventory Sync            â”‚
â”‚ â€¢ 2FA/MFA    â”‚ â€¢ Limits    â”‚ â€¢ Outcomes  â”‚ â€¢ Price Oracle              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Chat      â”‚   Betting   â”‚   Tourn.    â”‚       Fraud                 â”‚
â”‚   Service    â”‚   Service   â”‚   Service   â”‚      Detection              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Messages   â”‚ â€¢ Odds Feed â”‚ â€¢ Brackets  â”‚ â€¢ Risk Scoring              â”‚
â”‚ â€¢ Rooms      â”‚ â€¢ Bet Slip  â”‚ â€¢ Prizes    â”‚ â€¢ Pattern Detection         â”‚
â”‚ â€¢ Moderation â”‚ â€¢ Settlementâ”‚ â€¢ Schedule  â”‚ â€¢ Device Fingerprint        â”‚
â”‚ â€¢ History    â”‚ â€¢ Live Data â”‚ â€¢ Streaming â”‚ â€¢ Velocity Checks           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Infrastructure Layer                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   PostgreSQL    â”‚      Redis      â”‚   Apache Kafka  â”‚   S3 + Glacier   â”‚
â”‚   (Primary)     â”‚   (Cache/Pub)   â”‚   (Events)      â”‚   (Blobs/Arch.)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ RDS Multi-AZ   â€¢ ElastiCache     â€¢ MSK            â€¢ Lifecycle       â”‚
â”‚  â€¢ Read Replicas  â€¢ Cluster Mode    â€¢ 3 brokers      â€¢ Cross-region    â”‚
â”‚  â€¢ pgBouncer      â€¢ Pub/Sub         â€¢ Partitions     â€¢ Versioning      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3. ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚    | Ğ’Ñ‹Ğ±Ğ¾Ñ€         | ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                                                          |
| ------------ | ------------- | -------------------------------------------------------------------- |
| **Language** | Go 1.25+      | ĞĞ¸Ğ·ĞºĞ°Ñ latency, ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ GC, Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ stdlib Ğ´Ğ»Ñ networking       |
| **Database** | PostgreSQL 16 | ACID, JSONB, Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ² Go, Row-Level Security             |
| **Cache**    | Redis Cluster | Pub/Sub Ğ´Ğ»Ñ real-time, Ğ½Ğ¸Ğ·ĞºĞ°Ñ latency, Lua scripting Ğ´Ğ»Ñ Ğ°Ñ‚Ğ¾Ğ¼Ğ°Ñ€Ğ½Ğ¾ÑÑ‚Ğ¸ |
| **Queue**    | Apache Kafka  | Event sourcing, replay capability, ordering guarantees               |
| **Search**   | OpenSearch    | Full-text search Ğ´Ğ»Ñ Ñ‡Ğ°Ñ‚Ğ°, Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ»Ğ¾Ğ³Ğ¾Ğ²                           |

### 2.4. Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸

```
Assumptions:
â”œâ”€â”€ DAU: 100,000 users
â”œâ”€â”€ Peak CCU: 25,000 users
â”œâ”€â”€ Avg session: 45 minutes
â”œâ”€â”€ Actions per minute per user: 10 (bets, chat, navigation)
â””â”€â”€ Peak RPS: ~4,200 requests/second

Capacity Planning:
â”œâ”€â”€ API Servers: 8x c6g.xlarge (4 vCPU, 8GB) â€” 80% headroom
â”œâ”€â”€ WebSocket Servers: 4x c6g.2xlarge â€” 10K conn each
â”œâ”€â”€ PostgreSQL: db.r6g.2xlarge (8 vCPU, 64GB) + 2 read replicas
â”œâ”€â”€ Redis: cache.r6g.xlarge cluster (3 nodes)
â””â”€â”€ Kafka: 3x kafka.m5.large brokers
```

### 2.5. Data Flow Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¿ÑƒÑ‚Ğ¸ (Bet Placement)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client  â”‚â”€â”€â”€â”€â–¶â”‚ GraphQL â”‚â”€â”€â”€â”€â–¶â”‚ Gaming  â”‚â”€â”€â”€â”€â–¶â”‚ Wallet  â”‚â”€â”€â”€â”€â–¶â”‚  Event  â”‚
â”‚         â”‚     â”‚   API   â”‚     â”‚ Service â”‚     â”‚ Service â”‚     â”‚  Store  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚  1. placeBet  â”‚               â”‚               â”‚               â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚  2. validate  â”‚               â”‚               â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚ 3. debit      â”‚               â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚ 4. TX begin   â”‚
     â”‚               â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚               â”‚               â”‚               â”‚ 5. BetPlaced  â”‚
     â”‚               â”‚               â”‚               â”‚   event       â”‚
     â”‚               â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚  6. betId     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚           â”Œâ”€â”€â”€â”´â”€â”€â”€â”           â”‚               â”‚
     â”‚               â”‚           â”‚ Kafka â”‚           â”‚               â”‚
     â”‚               â”‚           â””â”€â”€â”€â”¬â”€â”€â”€â”˜           â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â–¼               â”‚               â”‚
     â”‚               â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚               â”‚
     â”‚               â”‚    â”‚ Fraud Detection â”‚        â”‚               â”‚
     â”‚               â”‚    â”‚   (async)       â”‚        â”‚               â”‚
     â”‚               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚               â”‚
```

---

## 3. Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ Frontend Ñ‡ĞµÑ€ĞµĞ· GraphQL

### 3.1. ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° GraphQL

| ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹           | REST           | GraphQL       | Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° |
| ------------------ | -------------- | ------------- | ----------------- |
| **Over-fetching**  | Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹        | ĞĞµÑ‚           | âœ… GraphQL        |
| **Under-fetching** | N+1 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²   | 1 Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ      | âœ… GraphQL        |
| **Real-time**      | Polling/SSE    | Subscriptions | âœ… GraphQL        |
| **Type Safety**    | OpenAPI (Ğ¾Ğ¿Ñ†.) | Schema-first  | âœ… GraphQL        |
| **Caching**        | HTTP cache     | Apollo Cache  | â‰ˆ ĞŸĞ°Ñ€Ğ¸Ñ‚ĞµÑ‚         |
| **Complexity**     | ĞĞ¸Ğ·ĞºĞ°Ñ         | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ       | âš ï¸ REST Ğ¿Ñ€Ğ¾Ñ‰Ğµ     |

**Ğ’ĞµÑ€Ğ´Ğ¸ĞºÑ‚:** GraphQL â€” Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ´Ğ»Ñ:

1. **Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹ UI** â€” Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ñ‹ Ñ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾Ğ¼ Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚Ğ¾Ğ² (Ğ±Ğ°Ğ»Ğ°Ğ½Ñ, Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ, Ñ‡Ğ°Ñ‚, Ğ¸Ğ³Ñ€Ğ°)
2. **Real-time** â€” Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ½Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ³Ñ€, Ñ‡Ğ°Ñ‚Ğ°, ÑÑ‚Ğ°Ğ²Ğ¾Ğº
3. **Mobile + Web** â€” Ğ¾Ğ´Ğ¸Ğ½ API Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸

### 3.2. Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Go Ñ gqlgen

```go
// internal/graph/schema.graphqls
type Query {
  me: User!
  game(id: ID!): Game
  rouletteHistory(limit: Int = 50): [RouletteRound!]!
  matchBettingOdds(matchId: ID!): [BettingOdd!]!
}

type Mutation {
  placeBet(input: PlaceBetInput!): PlaceBetResult!
  createCoinflip(input: CreateCoinflipInput!): Coinflip!
  joinCoinflip(id: ID!): JoinCoinflipResult!
  sendChatMessage(roomId: ID!, content: String!): ChatMessage!
}

type Subscription {
  rouletteRound: RouletteRound!           # ĞĞ¾Ğ²Ñ‹Ğµ Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹ Ñ€ÑƒĞ»ĞµÑ‚ĞºĞ¸
  chatMessages(roomId: ID!): ChatMessage! # Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ñ‡Ğ°Ñ‚Ğ°
  walletBalance: WalletUpdate!            # Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°
  coinflipUpdates: CoinflipEvent!         # Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ coinflip
  matchOddsUpdate(matchId: ID!): BettingOdd! # Live odds
}
```

### 3.3. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° GraphQL ÑĞ»Ğ¾Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GraphQL Gateway                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Schema    â”‚   â”‚  Resolvers  â”‚   â”‚ DataLoaders â”‚  â”‚
â”‚  â”‚  (gqlgen)   â”‚   â”‚             â”‚   â”‚ (N+1 fix)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                â”‚                 â”‚          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                          â–¼                            â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                 â”‚   Middleware    â”‚                   â”‚
â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚                 â”‚ â€¢ Auth (JWT)    â”‚                   â”‚
â”‚                 â”‚ â€¢ Rate Limiting â”‚                   â”‚
â”‚                 â”‚ â€¢ Query Depth   â”‚                   â”‚
â”‚                 â”‚ â€¢ Complexity    â”‚                   â”‚
â”‚                 â”‚ â€¢ Tracing       â”‚                   â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                          â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Domain Services (gRPC)â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4. Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ°Ñ‚Ğ°Ğº Ğ½Ğ° GraphQL

```go
// internal/graph/middleware/complexity.go

// ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
func ComplexityLimit(ctx context.Context, rc *graphql.OperationContext) *gqlerror.Error {
    complexity := graphql.GetOperationContext(ctx).Stats.Complexity
    if complexity > MaxQueryComplexity {
        return gqlerror.Errorf("query complexity %d exceeds maximum %d",
            complexity, MaxQueryComplexity)
    }
    return nil
}

// ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
const MaxQueryDepth = 10

// Rate limiting per user
var rateLimiter = rate.NewLimiter(rate.Every(time.Second/100), 100) // 100 RPS
```

### 3.5. Subscriptions Ñ‡ĞµÑ€ĞµĞ· WebSocket

```go
// Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº
type SubscriptionTransport struct {
    upgrader websocket.Upgrader
    hub      *pubsub.Hub  // Redis Pub/Sub backed
}

// ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº
//
// Client <â”€â”€WebSocketâ”€â”€> GraphQL Server <â”€â”€Redis Pub/Subâ”€â”€> Domain Services
//                              â”‚
//                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//                    â”‚  Subscription     â”‚
//                    â”‚  Manager          â”‚
//                    â”‚  - Per-user rooms â”‚
//                    â”‚  - Heartbeat      â”‚
//                    â”‚  - Reconnect      â”‚
//                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. E2E-Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### 4.1. ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

| Ğ Ğ¸ÑĞº                            | Impact               | E2E Mitigation            |
| ------------------------------- | -------------------- | ------------------------- |
| ĞÑˆĞ¸Ğ±ĞºĞ° Ğ² Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğµ Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚         | ğŸ’° Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğ¸ | Ğ¢ĞµÑÑ‚ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ° ÑÑ‚Ğ°Ğ²ĞºĞ¸ |
| Race condition Ğ² coinflip       | ğŸ® ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ğ´Ğ¾Ğ²ĞµÑ€Ğ¸Ñ    | Concurrent bet placement  |
| Ğ£Ñ‚ĞµÑ‡ĞºĞ° ÑÑ€ĞµĞ´ÑÑ‚Ğ² Ğ¿Ñ€Ğ¸ withdraw     | ğŸ’¸ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹       | Full withdrawal flow      |
| ĞĞµÑĞ¾Ğ³Ğ»Ğ°ÑĞ¾Ğ²Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ Provably Fair | âš–ï¸ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ñ€Ğ¸ÑĞº | Verification test suite   |

### 4.2. Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Test Pyramid                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚                        â•±â•²                                           â”‚
â”‚                       â•±  â•²    E2E Tests (godog)                     â”‚
â”‚                      â•± 5% â•²   - Critical user journeys              â”‚
â”‚                     â•±â”€â”€â”€â”€â”€â”€â•²  - Cross-service flows                 â”‚
â”‚                    â•±        â•²                                       â”‚
â”‚                   â•±   15%    â•² Integration Tests                    â”‚
â”‚                  â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•² - Service boundaries                â”‚
â”‚                 â•±              â•² - DB interactions                  â”‚
â”‚                â•±      80%       â•² Unit Tests                        â”‚
â”‚               â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•² - Business logic                 â”‚
â”‚              â•±                    â•² - Algorithms                    â”‚
â”‚             â•±______________________â•²                                â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3. Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Godog (BDD)

```gherkin
# features/betting/roulette.feature

Feature: Roulette Game Flow
  As a verified user
  I want to place bets on roulette
  So that I can win coins based on game outcomes

  Background:
    Given I am logged in as user "test_user_001"
    And my wallet balance is 1000 coins
    And current roulette round is accepting bets

  @critical @financial
  Scenario: Successful bet placement and win
    When I place a bet of 100 coins on "red"
    Then my wallet balance should be 900 coins
    And I should receive a bet confirmation with bet_id
    And the bet should appear in my active bets

    When the round ends with result "red"
    Then I should receive 200 coins (2x payout)
    And my wallet balance should be 1100 coins
    And the bet should appear in my bet history with status "won"

  @critical @financial
  Scenario: Bet placement with insufficient funds
    Given my wallet balance is 50 coins
    When I try to place a bet of 100 coins on "black"
    Then I should receive error "INSUFFICIENT_FUNDS"
    And my wallet balance should remain 50 coins
    And no bet should be created

  @provably-fair @compliance
  Scenario: Verify Provably Fair outcome
    Given a roulette round with published server_seed_hash
    And I have set my client_seed to "my_custom_seed_123"
    When the round ends
    Then I should receive the revealed server_seed
    And HMAC-SHA512(server_seed, client_seed:nonce) should match the outcome
    And the outcome should be verifiable via public verification page
```

```go
// internal/e2e/steps/roulette_steps.go

package steps

import (
    "context"
    "github.com/cucumber/godog"
)

type RouletteContext struct {
    client    *testclient.Client
    userID    string
    betID     string
    roundID   string
    balance   int64
}

func (r *RouletteContext) iAmLoggedInAsUser(userID string) error {
    token, err := r.client.Auth.Login(context.Background(), userID, "test_password")
    if err != nil {
        return err
    }
    r.client.SetAuthToken(token)
    r.userID = userID
    return nil
}

func (r *RouletteContext) myWalletBalanceIsCoins(balance int64) error {
    // Setup test data
    return r.client.TestHelper.SetUserBalance(r.userID, balance)
}

func (r *RouletteContext) iPlaceABetOfCoinsOn(amount int64, color string) error {
    resp, err := r.client.GraphQL.Mutate(context.Background(), `
        mutation PlaceBet($input: PlaceBetInput!) {
            placeBet(input: $input) {
                betId
                status
                newBalance
            }
        }
    `, map[string]interface{}{
        "input": map[string]interface{}{
            "gameType": "ROULETTE",
            "amount":   amount,
            "choice":   color,
        },
    })
    if err != nil {
        return err
    }
    r.betID = resp.Data.PlaceBet.BetId
    return nil
}

func InitializeRouletteScenario(ctx *godog.ScenarioContext) {
    rc := &RouletteContext{client: testclient.New()}

    ctx.Step(`^I am logged in as user "([^"]*)"$`, rc.iAmLoggedInAsUser)
    ctx.Step(`^my wallet balance is (\d+) coins$`, rc.myWalletBalanceIsCoins)
    ctx.Step(`^I place a bet of (\d+) coins on "([^"]*)"$`, rc.iPlaceABetOfCoinsOn)
    // ... more steps
}
```

### 4.4. ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ Ğ´Ğ»Ñ E2E

| ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ         | Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸                                         | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚   |
| ----------------- | ------------------------------------------------ | ----------- |
| **Wallet**        | Deposit, Withdraw, Transfer, Balance consistency | ğŸ”´ Critical |
| **Gaming**        | Bet placement, Outcome calculation, Payout       | ğŸ”´ Critical |
| **Provably Fair** | Seed generation, Verification, Audit trail       | ğŸ”´ Critical |
| **Trading**       | Steam trade flow, Inventory sync, P2P matching   | ğŸŸ  High     |
| **Betting**       | Odds update, Bet settlement, Live betting        | ğŸŸ  High     |
| **Auth**          | Login, 2FA, Session management, OAuth            | ğŸŸ¡ Medium   |
| **Chat**          | Message delivery, Moderation, Rate limits        | ğŸŸ¢ Low      |

### 4.5. CI/CD Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ

```yaml
# .github/workflows/e2e.yml

name: E2E Tests

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  e2e-critical:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:16
      redis:
        image: redis:7-alpine
      kafka:
        image: confluentinc/cp-kafka:7.5.0

    steps:
      - uses: actions/checkout@v4

      - name: Setup Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.25'

      - name: Start services
        run: make docker-compose-test-up

      - name: Run migrations
        run: make migrate-test

      - name: Run E2E tests (critical)
        run: |
          go test -v ./internal/e2e/... \
            -godog.tags="@critical" \
            -godog.format=cucumber \
            -godog.output=reports/cucumber.json

      - name: Upload test results
        uses: actions/upload-artifact@v4
        with:
          name: e2e-results
          path: reports/
```

---

## 5. Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° AWS

### 5.1. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AWS Cloud                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Global Edge (us-east-1)                   â”‚  â”‚
â”‚  â”‚  CloudFront â”€â”€â”€â”€ WAF â”€â”€â”€â”€ Shield Advanced â”€â”€â”€â”€ Route 53      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                               â”‚
â”‚                                    â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      VPC (eu-west-1)                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              Public Subnets (3 AZs)                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   ALB   â”‚  â”‚ NAT GW  â”‚  â”‚ Bastion â”‚                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                              â”‚                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              Private Subnets (3 AZs)                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              EKS Cluster                         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚GraphQL â”‚ â”‚Gaming  â”‚ â”‚Wallet  â”‚ â”‚Trading â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚Service â”‚ â”‚Service â”‚ â”‚Service â”‚ â”‚Service â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚Chat    â”‚ â”‚Betting â”‚ â”‚Fraud   â”‚ â”‚Identityâ”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚Service â”‚ â”‚Service â”‚ â”‚Service â”‚ â”‚Service â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                              â”‚                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              Data Subnets (3 AZs)                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚RDS Postgresâ”‚  â”‚ElastiCache â”‚  â”‚    MSK     â”‚        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚Multi-AZ    â”‚  â”‚  Redis     â”‚  â”‚   Kafka    â”‚        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Observability                             â”‚  â”‚
â”‚  â”‚  CloudWatch â”€â”€â”€â”€ X-Ray â”€â”€â”€â”€ OpenSearch â”€â”€â”€â”€ Grafana          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2. Kubernetes (EKS) ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```yaml
# k8s/base/gaming-service/deployment.yaml

apiVersion: apps/v1
kind: Deployment
metadata:
  name: gaming-service
  labels:
    app: gaming-service
    tier: core
spec:
  replicas: 3
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  selector:
    matchLabels:
      app: gaming-service
  template:
    metadata:
      labels:
        app: gaming-service
      annotations:
        prometheus.io/scrape: 'true'
        prometheus.io/port: '9090'
    spec:
      serviceAccountName: gaming-service
      containers:
        - name: gaming-service
          image: ${ECR_REGISTRY}/gaming-service:${VERSION}
          ports:
            - containerPort: 8080
              name: grpc
            - containerPort: 9090
              name: metrics
          resources:
            requests:
              cpu: '500m'
              memory: '512Mi'
            limits:
              cpu: '2000m'
              memory: '2Gi'
          env:
            - name: DB_HOST
              valueFrom:
                secretKeyRef:
                  name: db-credentials
                  key: host
          livenessProbe:
            grpc:
              port: 8080
            initialDelaySeconds: 10
            periodSeconds: 10
          readinessProbe:
            grpc:
              port: 8080
            initialDelaySeconds: 5
            periodSeconds: 5
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 100
              podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app: gaming-service
                topologyKey: topology.kubernetes.io/zone
```

### 5.3. ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚ AWS

| Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ                  | Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ | ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ                               |
| -------------------------- | -------- | ---------------------------------------- |
| **Reserved Instances**     | 30-60%   | RDS, ElastiCache, Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° EKS   |
| **Savings Plans**          | 20-40%   | Compute (EC2, Fargate, Lambda)           |
| **Spot Instances**         | 60-90%   | Non-critical workloads, batch processing |
| **Graviton (ARM)**         | 20-40%   | Ğ’ÑĞµ Go ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° ARM)  |
| **Right-sizing**           | 10-30%   | ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ utilization        |
| **S3 Intelligent-Tiering** | 20-40%   | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ lifecycle Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ    |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cost Optimization Strategy                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Workload Type          â”‚ Instance Strategy    â”‚ Expected Savings      â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   Core Services (24/7)   â”‚ Reserved + Graviton  â”‚ 50-70%                â”‚
â”‚   Peak Scaling           â”‚ Spot + On-Demand mix â”‚ 40-60%                â”‚
â”‚   Batch/Analytics        â”‚ Spot only            â”‚ 70-90%                â”‚
â”‚   Database               â”‚ Reserved Multi-AZ    â”‚ 40-50%                â”‚
â”‚                                                                         â”‚
â”‚   Monthly Estimate (100K DAU):                                          â”‚
â”‚   â”œâ”€â”€ Without optimization: ~$25,000/month                              â”‚
â”‚   â””â”€â”€ With optimization:    ~$12,000/month                              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4. Infrastructure as Code (Terraform)

```hcl
# terraform/modules/eks/main.tf

module "eks" {
  source  = "terraform-aws-modules/eks/aws"
  version = "~> 20.0"

  cluster_name    = "${var.project}-${var.environment}"
  cluster_version = "1.29"

  vpc_id     = module.vpc.vpc_id
  subnet_ids = module.vpc.private_subnets

  cluster_endpoint_public_access = true

  eks_managed_node_groups = {
    core = {
      name           = "core-workloads"
      instance_types = ["c7g.xlarge"]  # Graviton3

      min_size     = 3
      max_size     = 10
      desired_size = 5

      capacity_type = "ON_DEMAND"

      labels = {
        workload = "core"
      }
    }

    spot = {
      name           = "spot-workloads"
      instance_types = ["c7g.xlarge", "c6g.xlarge", "c7g.large"]

      min_size     = 0
      max_size     = 20
      desired_size = 2

      capacity_type = "SPOT"

      labels = {
        workload = "spot-tolerant"
      }

      taints = [{
        key    = "spot"
        value  = "true"
        effect = "NO_SCHEDULE"
      }]
    }
  }

  tags = var.common_tags
}
```

---

## 6. Ğ‘Ğ¾Ñ€ÑŒĞ±Ğ° Ñ Ñ„Ñ€Ğ¾Ğ´Ğ¾Ğ¼

### 6.1. ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ ÑƒĞ³Ñ€Ğ¾Ğ·

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Fraud Threat Landscape                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Multi-        â”‚  â”‚     Bonus       â”‚  â”‚   Arbitrage     â”‚  â”‚
â”‚  â”‚   Accounting    â”‚  â”‚     Abuse       â”‚  â”‚   Betting       â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ ĞœĞ½Ğ¾Ğ¶. Ğ°ĞºĞº.    â”‚  â”‚ â€¢ Promo abuse   â”‚  â”‚ â€¢ Cross-platformâ”‚  â”‚
â”‚  â”‚ â€¢ Ğ ĞµÑ„. Ñ„Ñ€Ğ¾Ğ´     â”‚  â”‚ â€¢ Welcome bonus â”‚  â”‚ â€¢ Hedge betting â”‚  â”‚
â”‚  â”‚ â€¢ Self-refer    â”‚  â”‚ â€¢ Cashout tricksâ”‚  â”‚ â€¢ Sure bets     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Collusion     â”‚  â”‚    Chargebacks  â”‚  â”‚   Bot/Script    â”‚  â”‚
â”‚  â”‚   (Coinflip)    â”‚  â”‚    Fraud        â”‚  â”‚   Abuse         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Team play     â”‚  â”‚ â€¢ Stolen cards  â”‚  â”‚ â€¢ Auto-betting  â”‚  â”‚
â”‚  â”‚ â€¢ Win trading   â”‚  â”‚ â€¢ CNP fraud     â”‚  â”‚ â€¢ Sniping       â”‚  â”‚
â”‚  â”‚ â€¢ Chip dumping  â”‚  â”‚ â€¢ Friendly frau â”‚  â”‚ â€¢ API abuse     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2. Multi-layered Detection Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Fraud Detection Pipeline                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  User Action                                                           â”‚
â”‚       â”‚                                                                â”‚
â”‚       â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Layer 1: Real-time Rules                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚ Velocity â”‚ â”‚  Device  â”‚ â”‚    IP    â”‚ â”‚  Geo     â”‚            â”‚   â”‚
â”‚  â”‚  â”‚  Checks  â”‚ â”‚ Fingerp. â”‚ â”‚  Checks  â”‚ â”‚  Checks  â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚               Response: <50ms, Block/Allow/Review               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚                                                                â”‚
â”‚       â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Layer 2: Risk Scoring                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚              ML Model (fraud_score: 0-100)               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  Features:                                               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Session behavior patterns                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Betting patterns (amount, frequency, game type)       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Deposit/Withdraw ratio                                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Social graph connections                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Time-based patterns                                   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚               Response: <200ms, Risk Score Assignment           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚                                                                â”‚
â”‚       â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Layer 3: Graph Analysis                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚           Network/Relationship Analysis                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Multi-account detection (shared device/IP/payment)    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Collusion rings (frequent P2P, coinflip patterns)     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Referral fraud networks                               â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚               Response: Async, Flag for Review                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚                                                                â”‚
â”‚       â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Layer 4: Manual Review                        â”‚   â”‚
â”‚  â”‚  â€¢ Risk Operations team dashboard                               â”‚   â”‚
â”‚  â”‚  â€¢ Case management system                                       â”‚   â”‚
â”‚  â”‚  â€¢ Evidence aggregation                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3. ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ğ¸

```go
// internal/fraud/rules/velocity.go

type VelocityRule struct {
    redis *redis.Client
}

// ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° velocity checks
var velocityLimits = map[string]VelocityLimit{
    "bet_count_1m":      {Window: time.Minute, Limit: 30},
    "bet_count_1h":      {Window: time.Hour, Limit: 500},
    "bet_amount_1h":     {Window: time.Hour, Limit: 100000}, // coins
    "withdraw_count_24h": {Window: 24 * time.Hour, Limit: 5},
    "login_attempts_1h": {Window: time.Hour, Limit: 10},
}

// Device Fingerprint Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
type DeviceFingerprint struct {
    CanvasHash       string
    WebGLHash        string
    AudioHash        string
    FontsHash        string
    ScreenResolution string
    Timezone         string
    Language         string
    Platform         string
}

func (f *FraudService) CheckMultiAccount(ctx context.Context, fp DeviceFingerprint) ([]string, error) {
    // ĞŸĞ¾Ğ¸ÑĞº Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ¾Ğ² Ñ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğ¼ fingerprint
    similarAccounts, err := f.repo.FindByFingerprint(ctx, fp)
    if err != nil {
        return nil, err
    }

    if len(similarAccounts) > 1 {
        // Flag for review
        f.events.Publish(ctx, FraudAlert{
            Type:     "MULTI_ACCOUNT_SUSPECTED",
            Accounts: similarAccounts,
            Evidence: fp,
        })
    }

    return similarAccounts, nil
}
```

### 6.4. Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹

| Risk Score | Action             | User Experience                  |
| ---------- | ------------------ | -------------------------------- |
| 0-20       | âœ… Allow           | Normal flow                      |
| 21-50      | âš ï¸ Allow + Monitor | Normal flow, enhanced logging    |
| 51-70      | ğŸ”„ Step-up Auth    | Require 2FA / email verification |
| 71-85      | â³ Manual Review   | Delay payout, queue for review   |
| 86-100     | ğŸ›‘ Block           | Block action, notify user        |

---

## 7. Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

### 7.1. KPI Dashboard ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Business Metrics Dashboard                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Revenue Metrics                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚   GGR        â”‚ â”‚   NGR        â”‚ â”‚   House      â”‚             â”‚   â”‚
â”‚  â”‚  â”‚ (Gross)      â”‚ â”‚ (Net)        â”‚ â”‚   Edge %     â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  $125,432    â”‚ â”‚  $98,250     â”‚ â”‚   2.7%       â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  â†‘ 12%       â”‚ â”‚  â†‘ 8%        â”‚ â”‚   â†’ 0%       â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    User Metrics                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚   DAU        â”‚ â”‚   WAU        â”‚ â”‚   MAU        â”‚             â”‚   â”‚
â”‚  â”‚  â”‚   15,234     â”‚ â”‚   52,891     â”‚ â”‚   98,432     â”‚             â”‚   â”‚
â”‚  â”‚  â”‚   â†‘ 5%       â”‚ â”‚   â†‘ 3%       â”‚ â”‚   â†‘ 7%       â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚   ARPU       â”‚ â”‚   LTV        â”‚ â”‚   Churn      â”‚             â”‚   â”‚
â”‚  â”‚  â”‚   $45.20     â”‚ â”‚   $312       â”‚ â”‚   8.5%       â”‚             â”‚   â”‚
â”‚  â”‚  â”‚   â†‘ 2%       â”‚ â”‚   â†‘ 5%       â”‚ â”‚   â†“ 1%       â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Game Metrics (by type)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ Game       â”‚ Bets/Day â”‚ Volume    â”‚ Margin â”‚ Popularityâ”‚     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚   â”‚
â”‚  â”‚  â”‚ Roulette   â”‚ 125,432  â”‚ $892,340  â”‚  2.7%  â”‚    45%    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ Coinflip   â”‚  45,231  â”‚ $523,120  â”‚  3.0%  â”‚    25%    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ Match Bet  â”‚  12,453  â”‚ $234,560  â”‚  5.2%  â”‚    20%    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ Crash      â”‚  34,521  â”‚ $178,920  â”‚  1.5%  â”‚    10%    â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Funnel Metrics                               â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  Visitors â”€â”€â–¶ Registered â”€â”€â–¶ Deposited â”€â”€â–¶ First Bet â”€â”€â–¶ D7     â”‚   â”‚
â”‚  â”‚   100,000      35,000         12,250        10,412       5,206  â”‚   â”‚
â”‚  â”‚      â”‚          35%            35%           85%          50%   â”‚   â”‚
â”‚  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2. Data Pipeline Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Analytics Data Pipeline                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚Services â”‚â”€â”€â”€â–¶â”‚  Kafka  â”‚â”€â”€â”€â–¶â”‚ Kinesis â”‚â”€â”€â”€â–¶â”‚Redshift â”‚               â”‚
â”‚  â”‚ Events  â”‚    â”‚ Topics  â”‚    â”‚Firehose â”‚    â”‚   DWH   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚       â”‚                                            â”‚                    â”‚
â”‚       â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                    â”‚
â”‚       â”‚         â”‚      Event Types                â”‚â”‚                    â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â€¢ user_registered              â”‚â”œâ”€â”€â”€â–¶ QuickSight     â”‚
â”‚                 â”‚  â€¢ deposit_completed            â”‚â”‚     Dashboards     â”‚
â”‚                 â”‚  â€¢ bet_placed                   â”‚â”‚                    â”‚
â”‚                 â”‚  â€¢ bet_settled                  â”‚â”œâ”€â”€â”€â–¶ dbt Models     â”‚
â”‚                 â”‚  â€¢ withdrawal_requested         â”‚â”‚                    â”‚
â”‚                 â”‚  â€¢ game_round_completed         â”‚â”œâ”€â”€â”€â–¶ Scheduled      â”‚
â”‚                 â”‚  â€¢ chat_message_sent            â”‚â”‚     Reports        â”‚
â”‚                 â”‚  â€¢ user_session_started         â”‚â”‚                    â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                    â”‚
â”‚                                                    â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  Dimensional Model (Star Schema)                â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚        dim_user â”€â”€â”€â”€â”€â”                                          â”‚    â”‚
â”‚  â”‚        dim_game â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€ fact_bets â”€â”€â”€â”€ fact_deposits         â”‚    â”‚
â”‚  â”‚        dim_time â”€â”€â”€â”€â”€â”¤          â”‚              â”‚                â”‚    â”‚
â”‚  â”‚        dim_geographyâ”€â”˜          â”‚              â”‚                â”‚    â”‚
â”‚  â”‚                                 â–¼              â–¼                â”‚    â”‚
â”‚  â”‚                         Aggregated Metrics Tables               â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3. ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹

```
GGR (Gross Gaming Revenue) = Total Bets - Total Payouts

NGR (Net Gaming Revenue) = GGR - Bonuses - Jackpot Contributions - Taxes

House Edge = (Total Bets - Total Payouts) / Total Bets Ã— 100%

ARPU = Total Revenue / Active Users

LTV = ARPU Ã— Average Lifetime (months)

Churn Rate = (Users at Start - Users at End + New Users) / Users at Start Ã— 100%

Conversion Rate = Depositing Users / Registered Users Ã— 100%

D1/D7/D30 Retention = Users Active on Day N / Users Registered N Days Ago Ã— 100%
```

---

## 8. Ğ¢ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ñ Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### 8.1. Observability Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Three Pillars of Observability                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        METRICS                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚  â”‚Prometheusâ”‚â”€â”€â”€â–¶â”‚ Thanos   â”‚â”€â”€â”€â–¶â”‚ Grafana  â”‚                   â”‚   â”‚
â”‚  â”‚  â”‚ (scrape) â”‚    â”‚ (store)  â”‚    â”‚ (viz)    â”‚                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚  â”‚  + CloudWatch Metrics (AWS infrastructure)                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         LOGS                                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚  â”‚ Fluentd  â”‚â”€â”€â”€â–¶â”‚OpenSearchâ”‚â”€â”€â”€â–¶â”‚ Kibana   â”‚                   â”‚   â”‚
â”‚  â”‚  â”‚(collect) â”‚    â”‚ (store)  â”‚    â”‚ (query)  â”‚                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚  â”‚  + CloudWatch Logs (container logs, Lambda)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        TRACES                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚  â”‚  OTel    â”‚â”€â”€â”€â–¶â”‚  Tempo   â”‚â”€â”€â”€â–¶â”‚ Grafana  â”‚                   â”‚   â”‚
â”‚  â”‚  â”‚(instr.)  â”‚    â”‚ (store)  â”‚    â”‚ (viz)    â”‚                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚  â”‚  + AWS X-Ray (AWS service integration)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2. SLI/SLO Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ

| Service           | SLI            | SLO Target | Error Budget   |
| ----------------- | -------------- | ---------- | -------------- |
| **GraphQL API**   | Availability   | 99.9%      | 43.8 min/month |
| **GraphQL API**   | Latency (p99)  | < 200ms    | -              |
| **Bet Placement** | Success Rate   | 99.95%     | 21.9 min/month |
| **Bet Placement** | Latency (p99)  | < 100ms    | -              |
| **Withdrawals**   | Availability   | 99.9%      | 43.8 min/month |
| **Chat**          | Delivery Rate  | 99.5%      | 3.6 hrs/month  |
| **Match Betting** | Odds Freshness | < 5s stale | -              |

### 8.3. Alerting Rules

```yaml
# prometheus/alerts/critical.yml

groups:
  - name: critical-alerts
    rules:
      - alert: HighErrorRate
        expr: |
          sum(rate(http_requests_total{status=~"5.."}[5m])) 
          / sum(rate(http_requests_total[5m])) > 0.01
        for: 2m
        labels:
          severity: critical
          team: platform
        annotations:
          summary: 'High error rate detected'
          description: 'Error rate is {{ $value | humanizePercentage }}'

      - alert: BetPlacementLatency
        expr: |
          histogram_quantile(0.99, 
            sum(rate(bet_placement_duration_seconds_bucket[5m])) by (le)
          ) > 0.1
        for: 5m
        labels:
          severity: warning
          team: gaming
        annotations:
          summary: 'Bet placement p99 latency > 100ms'

      - alert: WalletServiceDown
        expr: up{job="wallet-service"} == 0
        for: 1m
        labels:
          severity: critical
          team: platform
        annotations:
          summary: 'Wallet service is down'
          runbook: 'https://runbooks.internal/wallet-service-down'

      - alert: FraudScoreSpike
        expr: |
          avg(fraud_score) > 50
        for: 10m
        labels:
          severity: warning
          team: risk
        annotations:
          summary: 'Average fraud score elevated'
```

### 8.4. Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Go ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

```go
// internal/telemetry/setup.go

package telemetry

import (
    "go.opentelemetry.io/otel"
    "go.opentelemetry.io/otel/exporters/otlp/otlptrace"
    "go.opentelemetry.io/otel/sdk/resource"
    sdktrace "go.opentelemetry.io/otel/sdk/trace"
    "github.com/prometheus/client_golang/prometheus"
)

// Custom metrics
var (
    BetsPlaced = prometheus.NewCounterVec(
        prometheus.CounterOpts{
            Name: "bets_placed_total",
            Help: "Total number of bets placed",
        },
        []string{"game_type", "outcome"},
    )

    BetAmount = prometheus.NewHistogramVec(
        prometheus.HistogramOpts{
            Name:    "bet_amount_coins",
            Help:    "Distribution of bet amounts",
            Buckets: []float64{10, 50, 100, 500, 1000, 5000, 10000},
        },
        []string{"game_type"},
    )

    ActiveConnections = prometheus.NewGaugeVec(
        prometheus.GaugeOpts{
            Name: "websocket_connections_active",
            Help: "Number of active WebSocket connections",
        },
        []string{"room_type"},
    )
)

func InitTelemetry(serviceName string) (*sdktrace.TracerProvider, error) {
    // Setup OpenTelemetry with OTLP exporter
    exporter, err := otlptrace.New(context.Background(),
        otlptrace.WithEndpoint(os.Getenv("OTEL_EXPORTER_OTLP_ENDPOINT")),
    )
    if err != nil {
        return nil, err
    }

    tp := sdktrace.NewTracerProvider(
        sdktrace.WithBatcher(exporter),
        sdktrace.WithResource(resource.NewWithAttributes(
            semconv.SchemaURL,
            semconv.ServiceNameKey.String(serviceName),
            semconv.DeploymentEnvironmentKey.String(os.Getenv("ENV")),
        )),
    )

    otel.SetTracerProvider(tp)

    // Register Prometheus metrics
    prometheus.MustRegister(BetsPlaced, BetAmount, ActiveConnections)

    return tp, nil
}
```

### 8.5. Dashboards ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Grafana Dashboard Hierarchy                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Executive Overview                                                    â”‚
â”‚  â”œâ”€â”€ Revenue (GGR, NGR, trend)                                         â”‚
â”‚  â”œâ”€â”€ Active Users (DAU, WAU, MAU)                                      â”‚
â”‚  â””â”€â”€ System Health (availability, errors)                              â”‚
â”‚                                                                        â”‚
â”‚  Gaming Operations                                                     â”‚
â”‚  â”œâ”€â”€ Roulette Dashboard                                                â”‚
â”‚  â”‚   â”œâ”€â”€ Rounds per hour                                               â”‚
â”‚  â”‚   â”œâ”€â”€ Bet distribution (red/black/green)                            â”‚
â”‚  â”‚   â””â”€â”€ House edge actual vs expected                                 â”‚
â”‚  â”œâ”€â”€ Coinflip Dashboard                                                â”‚
â”‚  â”‚   â”œâ”€â”€ Active games                                                  â”‚
â”‚  â”‚   â”œâ”€â”€ Average pot size                                              â”‚
â”‚  â”‚   â””â”€â”€ Settlement latency                                            â”‚
â”‚  â””â”€â”€ Match Betting Dashboard                                           â”‚
â”‚      â”œâ”€â”€ Live matches                                                  â”‚
â”‚      â”œâ”€â”€ Odds movement                                                 â”‚
â”‚      â””â”€â”€ Settlement status                                             â”‚
â”‚                                                                        â”‚
â”‚  Platform Engineering                                                  â”‚
â”‚  â”œâ”€â”€ Service Health (per service)                                      â”‚
â”‚  â”œâ”€â”€ Database Performance                                              â”‚
â”‚  â”œâ”€â”€ Cache Hit Rates                                                   â”‚
â”‚  â”œâ”€â”€ Kafka Lag                                                         â”‚
â”‚  â””â”€â”€ Error Budgets (SLO tracking)                                      â”‚
â”‚                                                                        â”‚
â”‚  Security & Fraud                                                      â”‚
â”‚  â”œâ”€â”€ Fraud Score Distribution                                          â”‚
â”‚  â”œâ”€â”€ Blocked Transactions                                              â”‚
â”‚  â”œâ”€â”€ Multi-account Detections                                          â”‚
â”‚  â””â”€â”€ Manual Review Queue                                               â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

### 9.1. ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

| ĞĞ±Ğ»Ğ°ÑÑ‚ÑŒ            | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ                          | ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                             |
| ------------------ | -------------------------------- | --------------------------------------- |
| **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°**    | ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ + Event Sourcing    | ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ, audit trail, CQRS     |
| **API**            | GraphQL (gqlgen) + Subscriptions | Ğ“Ğ¸Ğ±ĞºĞ¾ÑÑ‚ÑŒ, real-time, type safety        |
| **Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**   | E2E Ğ½Ğ° Godog + Test Pyramid      | Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ°Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ, BDD             |
| **Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°** | AWS EKS + Graviton               | Cost efficiency, managed K8s            |
| **Anti-fraud**     | Multi-layer ML + Rules           | ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°, low false positives |
| **Observability**  | OTel + Prometheus + Grafana      | Full stack visibility, open standards   |

### 9.2. Ğ Ğ¸ÑĞºĞ¸ Ğ¸ Ğ¼Ğ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸

| Ğ Ğ¸ÑĞº               | Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ | Impact      | ĞœĞ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ                                 |
| ------------------ | ----------- | ----------- | ----------------------------------------- |
| Steam API downtime | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ     | Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹     | Queue + retry, graceful degradation       |
| DDoS Ğ°Ñ‚Ğ°ĞºĞ°         | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ     | Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹     | CloudFront + WAF + Shield Advanced        |
| Regulatory changes | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ     | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ | Multi-region ready, compliance monitoring |
| Data breach        | ĞĞ¸Ğ·ĞºĞ°Ñ      | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ | Encryption at rest/transit, WAF, audits   |

### 9.3. Roadmap Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ñ

```
Phase 1 (Month 1-2): Foundation
â”œâ”€â”€ Core infrastructure (VPC, EKS, RDS, Redis)
â”œâ”€â”€ Identity service + Wallet service
â”œâ”€â”€ Basic Roulette game
â””â”€â”€ CI/CD pipeline + E2E framework

Phase 2 (Month 3-4): Gaming Expansion
â”œâ”€â”€ Coinflip + Crash games
â”œâ”€â”€ Chat service
â”œâ”€â”€ Trading service (Steam API integration)
â””â”€â”€ Fraud detection v1

Phase 3 (Month 5-6): Betting & Scale
â”œâ”€â”€ Match betting service
â”œâ”€â”€ Tournament organization
â”œâ”€â”€ Business analytics pipeline
â””â”€â”€ Full observability stack

Phase 4 (Month 7+): Optimization
â”œâ”€â”€ Performance tuning
â”œâ”€â”€ Cost optimization
â”œâ”€â”€ Advanced fraud detection (ML)
â””â”€â”€ Mobile apps (if planned)
```

---

## ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### A. Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

| Layer         | Technology            | Version |
| ------------- | --------------------- | ------- |
| Language      | Go                    | 1.25+   |
| GraphQL       | gqlgen                | 0.17+   |
| Database      | PostgreSQL            | 16      |
| Cache         | Redis                 | 7.x     |
| Queue         | Apache Kafka          | 3.6+    |
| Container     | Docker                | 24+     |
| Orchestration | Kubernetes (EKS)      | 1.29    |
| IaC           | Terraform             | 1.7+    |
| CI/CD         | GitHub Actions        | -       |
| Monitoring    | Prometheus + Grafana  | -       |
| Tracing       | OpenTelemetry + Tempo | -       |
| Logging       | Fluentd + OpenSearch  | -       |

### B. Ğ¡ÑÑ‹Ğ»ĞºĞ¸

- [gqlgen Documentation](https://gqlgen.com/)
- [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/)
- [Godog BDD Framework](https://github.com/cucumber/godog)
- [OpenTelemetry Go](https://opentelemetry.io/docs/languages/go/)
- [Provably Fair Specification](https://bitcointalk.org/index.php?topic=922898.0)

---

_Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½ Ğ´Ğ»Ñ Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ° Ğº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ½Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ğ¾Ğ¹ gambling Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹._
